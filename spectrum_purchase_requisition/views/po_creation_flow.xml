<odoo>
    <data>
        <record id="purchase_order_form_inherit" model="ir.ui.view">
            <field name="name">purchase.order.form.inherited</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">

                <xpath expr="//sheet" position="inside">
                    <field name="pr_type_text" invisible="1"/>
                </xpath>
                <xpath expr="//header/button[@name='action_view_picking']" position="replace">
                    <button name="action_view_picking"
                            string="Receive Products" class="oe_highlight" type="object"
                            invisible="is_shipped or state not in ('purchase', 'done') or incoming_picking_count == 0 or pr_type_text == 'Service'"
                            data-hotkey="y" groups="stock.group_stock_user"/>
                </xpath>

                <xpath expr="//header/button[@name='confirm_reminder_mail']" position="replace">
                    <button name="confirm_reminder_mail"
                            string="Confirm Receipt Date" type="object"
                            invisible="state not in ('purchase', 'done') or mail_reminder_confirmed or not date_planned or pr_type_text == 'Service'"
                            groups="base.group_no_one" data-hotkey="o"/>
                </xpath>

                <xpath expr="//button[@name='print_quotation']" position="after">
                    <button name="first_approval" invisible="state not in ('draft','sent')" string="Approval 1"
                            type="object"
                            class="btn-primary"/>
                    <button name="second_approval" invisible="state != 'first_approval'" string="Approval 2"
                            type="object"
                            class="btn-primary"/>

                </xpath>
                <xpath expr="//field[@name='date_order']" position="after">
                    <field name="pr_type_text" invisible="1"/>
                    <field name="type_of_discount" widget="radio"/>
                    <field name="discount_value" invisible="type_of_discount == 'lumpsum'"/>
                    <field name="discount_lumpsum" invisible="type_of_discount == 'percentage'"/>
                    <field name="vat_applicability" readonly="1" force_save="1"/>
                </xpath>
                <xpath expr="//page[@name='purchase_delivery_invoice']" position="after">
                    <page string="Delivery Details">
                        <field name="delivery_details"/>
                    </page>
                    <page string="Remarks">
                        <field name="remarks"/>
                    </page>
                    <page string="Vendor Details">
                        <group>
                             <div class="o_address_format">
                                <field name="street" placeholder="Street..." class="o_address_street" readonly="1"/>
                                <field name="street2" placeholder="Street 2..." class="o_address_street" readonly='1'/>
                                <field name="city" placeholder="City" class="o_address_city" readonly='1'/>
                                <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}"
                                       readonly="1"
                                       />
                                <field name="zip" placeholder="ZIP" class="o_address_zip" readonly="1"/>
                                 <field name="country_id" placeholder="Country" class="o_address_country"
                                           options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                           readonly="1"/>
                            </div>
                        </group>
                        <group>
                            <field name="cr_number"  placeholder="e.g. BE0477472701" readonly="1"/>
                            <field name="customer_currency"  readonly='1'/>
                            <field name="customer_tax"   readonly="1"/>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//button[@name='button_cancel']" position="replace">
                    <button name="button_cancel"
                            invisible="state not in ('draft','first_approval','second_approval' ,'to approve', 'sent', 'purchase')"
                            string="Cancel" type="object" data-hotkey="x"/>

                </xpath>
                <xpath expr="//button[@name='button_confirm'][2]" position="replace">
                    <button name="button_confirm" type="object" invisible="state != 'second_approval'"
                            context="{'validate_analytic': True}" string="Confirm Order" id="draft_confirm"
                            data-hotkey="q"/>


                </xpath>
                <xpath expr="//field[@name='partner_id']" position="replace">
                    <field name="partner_id" domain="[('customer_status', '=', 'unblock')]" string="Supplier" widget="res_partner_many2one"
                           context="{'res_partner_search_mode': 'supplier', 'show_vat': True}"
                           placeholder="Name, TIN, Email, or Reference"
                           readonly="state in ['cancel', 'done', 'purchase']"/>
                </xpath>
                <xpath expr="//field[@name='partner_ref']" position="replace">
                    <field name="partner_ref" string="Supplier Reference"/>
                </xpath>
                <xpath expr="//tree/field[@name='taxes_id']" position="after">
                    <field name="tolerance"/>
                    <field name="vat_applicability"/>
                    <field name="lumps_um"/>
                    <field name="last_buying_price"/>
                </xpath>
                <xpath expr="//tree/field[@name='discount']" position="replace">
                    <field name="discount" string="Disc.%" readonly="qty_invoiced != 0" optional="hide" force_save="1"/>
                </xpath>
            </field>
        </record>
        <record id="purchase_order_form_inherited" model="ir.ui.view">
            <field name="name">purchase.requisition.form</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase_requisition.purchase_order_form_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='requisition_id']" position="replace">
                    <field name="requisition_id" string="Select PR"
                           domain="[('state', 'in', ('in_progress', 'open', 'ongoing')), ('vendor_id', 'in', (partner_id, False)), ('company_id', '=', company_id)]"
                           options="{'no_create': True}" required="True"/>
                </xpath>
                <xpath expr="//field[@name='requisition_id']" position="after">
                    <field name="pr_type" readonly="1"/>

                </xpath>
            </field>
        </record>
    </data>
</odoo>